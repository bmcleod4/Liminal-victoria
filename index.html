<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Liminal Victoria</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>
<style> 
    p { text-indent: 25px } 
</style>
<style>
    icon { padding: 1px 1px 1px 1px }
</style>    
<style>
    .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
</style>
<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYm1jbGVvZDQiLCJhIjoiY2l1amt1MWE3MDB1aDJ6b2R4ZXRvd2RhcSJ9.CIiNm6Yp-Ikuo7kedKDZPg';

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/bmcleod4/ciutxvf4300ge2iqot49pev4y',
    center: [-123.352, 48.420],
    zoom: 13.8
});

map.on('load', function () {
    // Add a GeoJSON source containing place coordinates and information.
    map.addSource("places", {
        "type": "geojson",
        "data": {
            "type": "FeatureCollection",
            "features": [{
                "type": "Feature",
                "properties": {
                    "description": "<strong>Victoria Golf Course: The April Ghost</strong><p>The ghost of Doris Gravlin is said to haunt these links after her husband allegedly strangled her, dragged her remains across the seventh fairway and hid her away under a fallen tree. She is said to appear on the crosswalk by the seventh fairway to those driving the road that are untrue in their love, causing them to swerve dangerously if the driver isn't careful.</p>",
                    "icon": "lzxquwz01-55604" 
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.299924, 48.414932]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Ross Bay Cemetery: A Ghostly Party</strong><p>Many deceased individuals now call the Ross Bay Cemetery home, although some do so in a more etherial sense. David Fee is one said ghost, who was brutally murdered on the steps of St. Andrews Cathedral on Christmas Eve in 1890, and even the original resident of the area that would become the cemetery, Isabella Ross (first female landowner in Victoria), is said to still roam the grounds of what was once her farm.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.340535, 48.411174]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Craigdarroch Castle: Ghostly Founding Fathers</strong><p>Originally the home of Robert Dunsmuir, his wife, two sons, and eight daughters, this Victorian era home is said to be anchored to the ghosts of Dunsmuir's wife and daughters, as well as a maid, still playing games and music, waiting for Dunsmuir to return home.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.343803, 48.422352]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Pioneer Square: 1,300 Uneasy Souls</strong><p>Formerly the site of over 1,300 graves, Pioneer Square stands on what used to be Victoria's Old Burying Ground. If you travel at night, be sure to watch for the ghosts of resident ghosts Adelaide Griffin and Robert Johnson, who slit his own throat in the heart of Pioneer Square in the 1870s, and sill returns to perform his gruesome death for unwary travellers.",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.359245, 48.422778]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Beacon Hill Park: Tranquil Horror</strong><p>The groves of Beacon Hill Park are not only home to small animals and happy families of nature lovers. They also house the ghostly apparation of the Screaming Doppleganger, a woman murdered in the park and likes to appear at sunrise, and is said to emit a high pitched wail and vanish as the sun hits her etherial form</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.362532, 48.412539]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>St. Ann's Academy: Nine Nun's Rest</strong><p>The apparations of the nine sisiters, buried in the convent's original cemetery, are said to haunt this cathedral-turned-convent-school, The grounds are also rumoured to be one of the many resting places in Victoria for the spirit of Emily Carr.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.363757, 48.419020]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Chinatown: Protection Overhead</strong><p>The ghosts of former killers still haunt this popular spot downtown, stalking the streets much like they did when they were still living. Although they don't stay for long, as the Gates of Harmonious Interest are adorned with sumbols and talismans dedicated to warding off evil spirits.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.367288, 48.429377]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>The Fairmont Empress: An Eternal Stay</strong><p>In addition to being home to the wandering ghosts of lost and confused guests who perished before check-out time, the Empress is also siad to be haunted by the ghost of it's original architect, Francis Mawson Rattenbury, who was murdered by his wife's jealous lover in 1935. He is said to still wander the grounds and streets between the Empress and the Parliament Buildings, swinging his cane and whistling.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.367612, 48.421786]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Market Square: Even Ghosts Stop at Red Lights</strong><p>Formerly the epicentre of Victoria's infamous red light district, the square is reportedly still haunted by former patrons of the many bars, brothels and gambling dens in the area, still looking to satisfy something deep down.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.368775, 48.428098]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Bastion Square: Hanged by the Neck Until Restless</strong><p>Arguably one of Victoria's most famous haunted places, Bastion Square want always the summer market district we know it as today. It used to house the old Supreme Court building, which housed both the city's jail and gallows. Many of the unclaimed bodies of hanged criminals remain buried underneath the foundation, and their restless spirits still seek vindication from their accused crimes. The judge that sentenced these men, Sir Matthew Baillie Begbie, is also said to walk the halls of his former courthouse, which until recently acted as Victoria's historical Maritime Museum.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.369367, 48.425915]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>B.C. Parliament Buildings: Tormented Artistry</strong><p>The architect of the Parliament Buildings, the Fairmont Empress Hotel, and the Crystal Gardens, Francis Rattenbury, is said to wander the halls of his creations, looking for recognition after being murdered by his wife's jealous lover in 1935. Truly, this doesn't seem to be as haunting as some of the legislation that has come from the Parliament Buildings since their completion in 1897.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.370294, 48.419387]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Hatley Castle: Mutants, Aliens, or Spirits?</strong><p>A popular filming location for live action adaptations of the Superman and X-Men franchises, Hatley Castle stands tall and pround on the grounds of Royal Roads University. These same grounds are said to be another place of rest for the Dunsmuir family. Ghostly aparations of a woman appeared to cadets when the castle was used as anaval academy, tugging at their bedsheets, and causing a ruckus in the kitchens after bedtime. Alternatively, it could be Nightcrawler teleporting from place to place haphazardly, or Clark Kent zooming around at high speeds to get a midnight snack. Just saying, we've got our options.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.472601, 48.434488]
                }
            }]
        }
    });
    // Add a layer showing the places.
    map.addLayer({
        "id": "places",
        "type": "symbol",
        "source": "places",
        "layout": {
            "icon-image": "lzxquwz01-55604",
            "icon-allow-overlap": false
        }
    });
});


// When a click event occurs near a place, open a popup at the location of
// the feature, with description HTML from its properties.
map.on('click', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['places'] });

    if (!features.length) {
        return;
    }

    var feature = features[0];

    // Populate the popup and set its coordinates
    // based on the feature found.
    var popup = new mapboxgl.Popup()
        .setLngLat(feature.geometry.coordinates)
        .setHTML(feature.properties.description)
        .addTo(map);
});

// Use the same approach as above to indicate that the symbols are clickable
// by changing the cursor style to 'pointer'.
map.on('mousemove', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['places'] });
    map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
});
map.addControl(new mapboxgl.NavigationControl());    
</script>

</body>
</html>
