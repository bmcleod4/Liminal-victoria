<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Liminal Victoria</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>
<style> 
    p { text-indent: 25px } 
</style>
<style>
    icon { padding: 1px 1px 1px 1px }
</style>    
<style>
    .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
</style>
<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYm1jbGVvZDQiLCJhIjoiY2l1amt1MWE3MDB1aDJ6b2R4ZXRvd2RhcSJ9.CIiNm6Yp-Ikuo7kedKDZPg';

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/bmcleod4/ciutxvf4300ge2iqot49pev4y',
    center: [-123.352, 48.420],
    zoom: 13.8
});

map.on('load', function () {
    // Add a GeoJSON source containing place coordinates and information.
    map.addSource("places", {
        "type": "geojson",
        "data": {
            "type": "FeatureCollection",
            "features": [{
                "type": "Feature",
                "properties": {
                    "description": "<strong>Victoria Golf Course: The April Ghost</strong><p>The ghost of Doris Gravlin is said to haunt these links after her husband allegedly strangled her, dragged her remains across the seventh fairway and hid her away under a fallen tree. She is said to appear on the crosswalk by the seventh fairway to those driving the road that are untrue in their love, causing them to swerve dangerously if the driver isn't careful.</p>",
                    "icon": "lzxquwz01-55604" 
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.299924, 48.414932]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Ross Bay Cemetery: A Ghostly Party</strong><p>Many deceased individuals now call the Ross Bay Cemetery home, although some do so in a more etherial sense. David Fee is one said ghost, who was brutally murdered on the steps of St. Andrews Cathedral on Christmas Eve in 1890, and even the original resident of the area that would become the cemetery, Isabella Ross (first female landowner in Victoria), is said to still roam the grounds of what was once her farm.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.340535, 48.411174]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Craigdarroch Castle: Ghostly Founding Fathers</strong><p>Originally the home of Robert Dunsmuir, his wife, two sons, and eight daughters, this Victorian era home is said to be anchored to the ghosts of Dunsmuir's wife and daughters, as well as a maid, still playing games and music, waiting for Dunsmuir to return home.</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.343803, 48.422352]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Pioneer Square: 1,300 Uneasy Souls</strong><p>Formerly the site of over 1,300 graves, Pioneer Square stands on what used to be Victoria's Old Burying Ground. If you travel at night, be sure to watch for the ghosts of resident ghosts Adelaide Griffin and Robert Johnson, who slit his own throat in the heart of Pioneer Square in the 1870s, and sill returns to perform his gruesome death for unwary travellers.",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.359245, 48.422778]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Beacon Hill Park: Tranquil Horror</strong><p>The groves of Beacon Hill Park are not only home to small animals and happy families of nature lovers. They also house the ghostly apparation of the Screaming Doppleganger, a woman murdered in the park and likes to appear at sunrise, and is said to emit a high pitched wail and vanish as the sun hits her etherial form</p>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.362532, 48.412539]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>St. Ann's Academy</strong>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.363757, 48.419020]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Chinatown</strong>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.367288, 48.429377]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>The Fairmont Empress</strong>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.367612, 48.421786]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Market Square</strong>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.368775, 48.428098]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Bastion Square</strong>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.369367, 48.425915]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>B.C. Parliament Buildings</strong>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.370294, 48.419387]
                }
            }, {
                "type": "Feature",
                "properties": {
                    "description": "<strong>Hatley Castle</strong>",
                    "icon": "lzxquwz01-55604"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-123.472601, 48.434488]
                }
            }]
        }
    });
    // Add a layer showing the places.
    map.addLayer({
        "id": "places",
        "type": "symbol",
        "source": "places",
        "layout": {
            "icon-image": "lzxquwz01-55604",
            "icon-allow-overlap": false
        }
    });
});


// When a click event occurs near a place, open a popup at the location of
// the feature, with description HTML from its properties.
map.on('click', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['places'] });

    if (!features.length) {
        return;
    }

    var feature = features[0];

    // Populate the popup and set its coordinates
    // based on the feature found.
    var popup = new mapboxgl.Popup()
        .setLngLat(feature.geometry.coordinates)
        .setHTML(feature.properties.description)
        .addTo(map);
});

// Use the same approach as above to indicate that the symbols are clickable
// by changing the cursor style to 'pointer'.
map.on('mousemove', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['places'] });
    map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
});
</script>

</body>
</html>
